@model IEnumerable<TaskManagementMvc.Models.Invoice>
@{
    ViewData["Title"] = "صورتحساب‌ها";
}

<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
    <h2 class="m-0">صورتحساب‌ها</h2>
    <corp-btn variant="primary" icon="bi-plus" asp-action="Create" dense>صورتحساب جدید</corp-btn>
</div>

<corp-table headers="شناسه,تاریخ,ایمیل,مبلغ,وضعیت,عملیات" striped hover dense caption="لیست صورتحساب‌ها">
@foreach (var i in Model)
{
    <tr>
        <td>@i.InvoiceNumber</td>
        <td>@i.InvoiceDate.ToPersianDate()</td>
        <td>@i.CustomerEmail</td>
        <td>@(i.Lines?.Sum(l => l.Amount) ?? 0).ToString("C")</td>
        <td>
            @switch (i.Status)
            {
                case TaskManagementMvc.Models.InvoiceStatus.Draft:
                    <corp-badge variant="secondary" icon="bi-file-earmark" dense>پیش‌نویس</corp-badge>
                    break;
                case TaskManagementMvc.Models.InvoiceStatus.Sent:
                    <corp-badge variant="info" icon="bi-send" dense>ارسال شده</corp-badge>
                    break;
                case TaskManagementMvc.Models.InvoiceStatus.Paid:
                    <corp-badge variant="success" icon="bi-check-circle" dense>پرداخت شده</corp-badge>
                    break;
                case TaskManagementMvc.Models.InvoiceStatus.Cancelled:
                    <corp-badge variant="danger" icon="bi-x-circle" dense>لغو شده</corp-badge>
                    break;
            }
        </td>
        <td class="text-nowrap">
            <corp-btn variant="outline" icon="bi-eye" asp-action="Details" asp-route-id="@i.Id" dense>جزئیات</corp-btn>
        </td>
    </tr>
}
</corp-table>
